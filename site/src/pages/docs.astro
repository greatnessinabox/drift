---
import Layout from '../layouts/Layout.astro'
import Nav from '../components/Nav.astro'
import Footer from '../components/Footer.astro'
import CopyButton from '../components/CopyButton.astro'
---

<Layout
  title="Documentation — drift"
  description="Installation, configuration, CLI reference, and usage guide for drift — the real-time codebase health dashboard."
>
  <Nav activePage="docs" />

  <!-- Subtle EKG grid background -->
  <div class="fixed inset-0 ekg-grid opacity-30 pointer-events-none -z-10" aria-hidden="true"></div>
  <div class="fixed inset-0 bg-gradient-to-b from-bg via-bg/95 to-bg pointer-events-none -z-10" aria-hidden="true"></div>

  <main class="pt-32 pb-24 px-6">
    <div class="max-w-6xl mx-auto">

      <!-- Header -->
      <div class="mb-16 max-w-3xl">
        <div class="flex items-center gap-2 text-text-muted text-xs font-mono mb-6">
          <a href="/" class="hover:text-green transition-colors cursor-pointer">drift</a>
          <span>/</span>
          <span class="text-text">docs</span>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">Documentation</h1>
        <p class="text-text-muted text-lg leading-relaxed">Everything you need to install, configure, and use drift.</p>
      </div>

      <div class="flex gap-12">
        <!-- Sticky sidebar TOC (desktop) -->
        <nav class="hidden lg:block w-56 shrink-0" aria-label="Table of contents">
          <div class="sticky top-28">
            <p class="text-[11px] font-mono uppercase tracking-widest text-text-muted mb-4">On this page</p>
            <ul class="space-y-1.5 text-sm border-l border-border pl-4" id="toc-list">
              <li><a href="#install" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="install">Installation</a></li>
              <li><a href="#quick-start" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="quick-start">Quick Start</a></li>
              <li><a href="#configuration" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="configuration">Configuration</a></li>
              <li><a href="#cli-reference" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="cli-reference">CLI Reference</a></li>
              <li><a href="#health-metrics" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="health-metrics">Health Metrics</a></li>
              <li><a href="#ai-diagnostics" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="ai-diagnostics">AI Diagnostics</a></li>
              <li><a href="#copilot" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="copilot">Copilot Integration</a></li>
              <li><a href="#ci-cd" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="ci-cd">CI/CD</a></li>
              <li><a href="#keyboard-shortcuts" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="keyboard-shortcuts">Keyboard Shortcuts</a></li>
              <li><a href="#compatibility" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="compatibility">Compatibility</a></li>
              <li><a href="#faq" class="toc-link block py-1 text-text-muted hover:text-green transition-colors cursor-pointer" data-section="faq">FAQ</a></li>
            </ul>
            <div class="mt-6 pt-4 border-t border-border">
              <a href="#" class="text-text-muted hover:text-green text-xs font-mono transition-colors cursor-pointer flex items-center gap-1.5">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 19V5M5 12l7-7 7 7" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Back to top
              </a>
            </div>
          </div>
        </nav>

        <!-- Mobile TOC (collapsible) -->
        <details class="lg:hidden mb-10 bg-surface border border-border rounded-2xl w-full">
          <summary class="px-5 py-3.5 text-sm font-medium cursor-pointer text-text-muted hover:text-text transition-colors flex items-center justify-between">
            <span class="font-mono text-[11px] uppercase tracking-widest">On this page</span>
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="transition-transform"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </summary>
          <ul class="space-y-1 text-sm px-5 pb-4">
            <li><a href="#install" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Installation</a></li>
            <li><a href="#quick-start" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Quick Start</a></li>
            <li><a href="#configuration" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Configuration</a></li>
            <li><a href="#cli-reference" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">CLI Reference</a></li>
            <li><a href="#health-metrics" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Health Metrics</a></li>
            <li><a href="#ai-diagnostics" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">AI Diagnostics</a></li>
            <li><a href="#copilot" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Copilot Integration</a></li>
            <li><a href="#ci-cd" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">CI/CD</a></li>
            <li><a href="#keyboard-shortcuts" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Keyboard Shortcuts</a></li>
            <li><a href="#compatibility" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">Compatibility</a></li>
            <li><a href="#faq" class="block py-1.5 text-text-muted hover:text-green transition-colors cursor-pointer">FAQ</a></li>
          </ul>
        </details>

        <!-- Content -->
        <div class="space-y-20 min-w-0 flex-1 max-w-3xl">

        <!-- Install -->
        <section id="install">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">01</span>
            Installation
          </h2>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Homebrew (recommended)</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> brew install greatnessinabox/tap/drift</code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Shell script</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> curl -fsSL https://raw.githubusercontent.com/greatnessinabox/drift/main/install.sh | sh</code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Go install</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> go install github.com/greatnessinabox/drift/cmd/drift@latest</code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Build from source</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> git clone https://github.com/greatnessinabox/drift.git
<span class="text-green">$</span> cd drift
<span class="text-green">$</span> go build ./cmd/drift/</code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Verify it works</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto"><code><span class="text-green">$</span> drift --version
<span class="text-text-muted">drift v1.0.0</span></code></pre>
        </section>

        <!-- Quick Start -->
        <section id="quick-start">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">02</span>
            Quick Start
          </h2>

          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-text-muted"># Run the live dashboard in any supported project</span>
<span class="text-green">$</span> cd your-project
<span class="text-green">$</span> drift

<span class="text-text-muted"># Generate a report</span>
<span class="text-green">$</span> drift report

<span class="text-text-muted"># Check health (for CI)</span>
<span class="text-green">$</span> drift check --fail-under 70

<span class="text-text-muted"># Interactive fix with GitHub Copilot CLI</span>
<span class="text-green">$</span> drift fix</code></pre>

          <p class="text-text-muted text-sm leading-relaxed">
            drift auto-detects the language by checking for manifest files (<code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">go.mod</code>, <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">package.json</code>, <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">Cargo.toml</code>, <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">pyproject.toml</code>, <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">pom.xml</code>). Supports <strong class="text-text">Go</strong>, <strong class="text-text">TypeScript/JavaScript</strong>, <strong class="text-text">Python</strong>, <strong class="text-text">Rust</strong>, and <strong class="text-text">Java</strong>.
          </p>
        </section>

        <!-- Configuration -->
        <section id="configuration">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">03</span>
            Configuration
          </h2>

          <p class="text-text-muted text-sm leading-relaxed mb-6">
            Create a <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">.drift.yaml</code> in your project root. All fields are optional &mdash; drift works with zero config.
          </p>

          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto"><code><span class="text-text-muted"># Language (empty = auto-detect)</span>
<span class="text-purple">language:</span> <span class="text-yellow">""</span>

<span class="text-text-muted"># Directories to exclude</span>
<span class="text-purple">exclude:</span>
  - vendor
  - node_modules
  - .git
  - __pycache__
  - target

<span class="text-text-muted"># Metric weights (must sum to 1.0)</span>
<span class="text-purple">weights:</span>
  <span class="text-purple">complexity:</span> <span class="text-cyan">0.30</span>
  <span class="text-purple">deps:</span> <span class="text-cyan">0.20</span>
  <span class="text-purple">boundaries:</span> <span class="text-cyan">0.20</span>
  <span class="text-purple">dead_code:</span> <span class="text-cyan">0.15</span>
  <span class="text-purple">coverage:</span> <span class="text-cyan">0.15</span>

<span class="text-text-muted"># Architecture boundary rules</span>
<span class="text-purple">boundaries:</span>
  - <span class="text-purple">deny:</span> <span class="text-yellow">"pkg/api -> internal/db"</span>
  - <span class="text-purple">deny:</span> <span class="text-yellow">"cmd -> internal/tui"</span>

<span class="text-text-muted"># AI diagnostics (optional)</span>
<span class="text-purple">ai:</span>
  <span class="text-purple">provider:</span> anthropic  <span class="text-text-muted"># or "openai"</span>
  <span class="text-purple">model:</span> <span class="text-yellow">""</span>            <span class="text-text-muted"># uses sensible defaults</span>

<span class="text-text-muted"># Thresholds</span>
<span class="text-purple">thresholds:</span>
  <span class="text-purple">max_complexity:</span> <span class="text-cyan">15</span>
  <span class="text-purple">max_stale_days:</span> <span class="text-cyan">90</span>
  <span class="text-purple">min_score:</span> <span class="text-cyan">70</span></code></pre>
        </section>

        <!-- CLI Reference -->
        <section id="cli-reference">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">04</span>
            CLI Reference
          </h2>

          <div class="space-y-4">
            {[
              { cmd: 'drift', desc: 'Launch the interactive TUI dashboard. Auto-detects language and starts real-time monitoring with file watching.' },
              { cmd: 'drift init', desc: 'Initialize a .drift.yaml config file in the current directory with sensible defaults.' },
              { cmd: 'drift report', desc: 'Generate a one-shot health report to stdout. Useful for quick checks.' },
              { cmd: 'drift check --fail-under <score>', desc: 'Exit with code 1 if health score is below the threshold. Designed for CI pipelines.' },
              { cmd: 'drift fix', desc: 'Interactive mode — finds issues, asks GitHub Copilot for fixes, and lets you apply them one by one.' },
              { cmd: 'drift snapshot', desc: 'Output full health data as JSON. Useful for scripting and advanced CI workflows.' },
            ].map(item => (
              <div class="bg-surface border border-border rounded-xl p-5">
                <code class="text-green text-sm font-mono font-bold">{item.cmd}</code>
                <p class="text-text-muted text-sm mt-2 leading-relaxed">{item.desc}</p>
              </div>
            ))}
          </div>
        </section>

        <!-- Health Metrics -->
        <section id="health-metrics">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">05</span>
            Health Metrics
          </h2>

          <p class="text-text-muted text-sm leading-relaxed mb-6">
            The overall health score is a weighted average of five dimensions. Weights are configurable in <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">.drift.yaml</code>.
          </p>

          <div class="space-y-4">
            {[
              { name: 'Cyclomatic Complexity', weight: '30%', color: 'green', desc: 'Full AST analysis for Go, heuristic pattern matching for TS, Python, Rust, Java. Finds your most complex functions.' },
              { name: 'Dependency Freshness', weight: '20%', color: 'cyan', desc: 'Checks every dependency against its registry — Go proxy, npm, PyPI, crates.io, Maven Central.' },
              { name: 'Architecture Boundaries', weight: '20%', color: 'purple', desc: 'Define import deny rules (e.g., "api cannot import db") and detect violations.' },
              { name: 'Dead Code', weight: '15%', color: 'yellow', desc: 'Finds exported functions/types with zero callers across the entire codebase.' },
              { name: 'Test Coverage', weight: '15%', color: 'accent', desc: 'Reads coverage data from language-specific tools and factors it into the score.' },
            ].map(m => (
              <div class="bg-surface border border-border rounded-xl p-5 flex items-start gap-4">
                <span class={`text-[10px] font-mono text-${m.color} bg-${m.color}/10 border border-${m.color}/10 px-2.5 py-1 rounded-full shrink-0 tracking-wider`}>{m.weight}</span>
                <div>
                  <h3 class={`font-semibold text-sm text-${m.color} mb-1`}>{m.name}</h3>
                  <p class="text-text-muted text-sm leading-relaxed">{m.desc}</p>
                </div>
              </div>
            ))}
          </div>
        </section>

        <!-- AI Diagnostics -->
        <section id="ai-diagnostics">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">06</span>
            AI Diagnostics
          </h2>

          <p class="text-text-muted text-sm leading-relaxed mb-6">
            Press <kbd class="px-1.5 py-0.5 bg-surface-2 border border-border rounded text-text text-[11px] font-mono">d</kbd> in the dashboard to trigger an AI diagnosis. The AI analyzes your worst-scoring metrics and provides specific, actionable recommendations with code snippets.
          </p>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Supported providers</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
            <div class="bg-surface border border-border rounded-xl p-5">
              <h4 class="font-semibold text-sm mb-2">Anthropic Claude</h4>
              <p class="text-text-muted text-xs mb-3">Sonnet, Opus, Haiku</p>
              <code class="text-[11px] font-mono text-green">ANTHROPIC_API_KEY</code>
            </div>
            <div class="bg-surface border border-border rounded-xl p-5">
              <h4 class="font-semibold text-sm mb-2">OpenAI GPT-4o</h4>
              <p class="text-text-muted text-xs mb-3">GPT-4o, o1</p>
              <code class="text-[11px] font-mono text-green">OPENAI_API_KEY</code>
            </div>
          </div>

          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto"><code><span class="text-text-muted"># .drift.yaml</span>
<span class="text-purple">ai:</span>
  <span class="text-purple">provider:</span> anthropic  <span class="text-text-muted"># or "openai"</span>
  <span class="text-purple">model:</span> <span class="text-yellow">""</span>            <span class="text-text-muted"># uses sensible defaults</span></code></pre>
        </section>

        <!-- Copilot -->
        <section id="copilot">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">07</span>
            GitHub Copilot Integration
          </h2>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Interactive fixing</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> drift fix

  Analyzing codebase... <span class="text-text">(Score: 78/100)</span>

  Found <span class="text-yellow">3 issue(s)</span> to fix:
  1. <span class="text-accent">[HIGH]</span> model.Update() in <span class="text-text">app.go:126</span> (complexity: 25)

  Asking GitHub Copilot for suggestions...
  <span class="text-green">Apply this suggestion? [y/N/s(kip rest)]</span></code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Custom agent</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-green">$</span> copilot --agent drift-dev <span class="text-text">"analyze internal/tui/app.go"</span>
<span class="text-green">$</span> copilot --agent drift-dev <span class="text-text">"suggest refactoring for Update()"</span>
<span class="text-green">$</span> copilot --agent drift-dev <span class="text-text">"help me add C# analyzer support"</span></code></pre>

          <p class="text-text-muted text-sm leading-relaxed">
            Requires <code class="text-text text-xs bg-surface-2 px-1.5 py-0.5 rounded">brew install copilot-cli</code>. drift also works with any AI coding assistant &mdash; see the <a href="https://github.com/greatnessinabox/drift/blob/main/.github/AI_AGENTS.md" class="text-green hover:underline">multi-agent guide</a>.
          </p>
        </section>

        <!-- CI/CD -->
        <section id="ci-cd">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">08</span>
            CI/CD
          </h2>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Basic GitHub Action</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto mb-6"><code><span class="text-text-muted"># .github/workflows/drift.yml</span>
<span class="text-purple">name:</span> Code Health
<span class="text-purple">on:</span> [pull_request]

<span class="text-purple">jobs:</span>
  <span class="text-purple">drift:</span>
    <span class="text-purple">runs-on:</span> ubuntu-latest
    <span class="text-purple">steps:</span>
      - <span class="text-purple">uses:</span> actions/checkout@v4
      - <span class="text-purple">uses:</span> actions/setup-go@v5
        <span class="text-purple">with:</span>
          <span class="text-purple">go-version-file:</span> go.mod
      - <span class="text-purple">run:</span> go install github.com/greatnessinabox/drift/cmd/drift@latest
      - <span class="text-purple">run:</span> drift check <span class="text-yellow">--fail-under 70</span></code></pre>

          <h3 class="text-sm font-mono text-text-muted uppercase tracking-wider mb-3">Advanced: JSON snapshot</h3>
          <pre class="bg-surface border border-border rounded-xl p-5 font-mono text-sm overflow-x-auto"><code><span class="text-green">$</span> SCORE=$(drift snapshot | jq '.score.total')
<span class="text-green">$</span> LANG=$(drift snapshot | jq -r '.language')
<span class="text-green">$</span> echo <span class="text-yellow">"Language: $LANG, Score: $SCORE"</span></code></pre>
        </section>

        <!-- Keyboard Shortcuts -->
        <section id="keyboard-shortcuts">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">09</span>
            Keyboard Shortcuts
          </h2>

          <div class="bg-surface border border-border rounded-xl overflow-hidden">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-border/50">
                  <th class="text-left px-5 py-3 text-text-muted font-mono text-xs uppercase tracking-wider">Key</th>
                  <th class="text-left px-5 py-3 text-text-muted font-mono text-xs uppercase tracking-wider">Action</th>
                </tr>
              </thead>
              <tbody class="divide-y divide-border/30">
                {[
                  { key: 'tab', action: 'Navigate between panels' },
                  { key: 'shift+tab', action: 'Navigate backwards' },
                  { key: 'd', action: 'Run AI diagnosis' },
                  { key: 'r', action: 'Force full re-analysis' },
                  { key: 'q / ctrl+c', action: 'Quit' },
                  { key: 'esc', action: 'Close diagnosis overlay' },
                ].map(s => (
                  <tr>
                    <td class="px-5 py-3"><kbd class="px-2 py-0.5 bg-surface-2 border border-border rounded text-text text-xs font-mono">{s.key}</kbd></td>
                    <td class="px-5 py-3 text-text-muted">{s.action}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </section>

        <!-- Compatibility -->
        <section id="compatibility">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">10</span>
            Compatibility
          </h2>

          <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
            <div class="bg-surface border border-border rounded-xl p-5">
              <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-cyan"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4" stroke-linecap="round"/></svg>
                Operating Systems
              </h3>
              <ul class="space-y-1.5 text-sm text-text-muted">
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> macOS (arm64, amd64)</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> Linux (arm64, amd64)</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> Windows (amd64, arm64)</li>
              </ul>
            </div>

            <div class="bg-surface border border-border rounded-xl p-5">
              <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-purple"><polyline points="4 17 10 11 4 5" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="19" x2="20" y2="19" stroke-linecap="round"/></svg>
                Shells
              </h3>
              <ul class="space-y-1.5 text-sm text-text-muted">
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> bash / zsh</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> fish / nushell</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> PowerShell / cmd</li>
              </ul>
            </div>

            <div class="bg-surface border border-border rounded-xl p-5">
              <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-yellow"><path d="M12 2L2 7l10 5 10-5-10-5z" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Languages
              </h3>
              <ul class="space-y-1.5 text-sm text-text-muted">
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> Go 1.21+</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> TypeScript / JavaScript</li>
                <li class="flex items-center gap-2"><span class="text-green text-xs">&#10003;</span> Python, Rust, Java</li>
              </ul>
            </div>
          </div>

          <p class="text-text-muted text-sm leading-relaxed">
            drift is a single static binary with <strong class="text-text">zero runtime dependencies</strong>. No Node.js, no Python runtime, no Docker. Just download and run.
          </p>
        </section>

        <!-- FAQ -->
        <section id="faq">
          <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
            <span class="text-green font-mono text-base">11</span>
            FAQ &amp; Troubleshooting
          </h2>

          <div class="space-y-4">
            {[
              {
                q: 'drift says "no supported project found"',
                a: 'drift looks for manifest files (go.mod, package.json, Cargo.toml, pyproject.toml, pom.xml) in the current directory. Make sure you\'re running drift from the project root, or set the language explicitly in .drift.yaml.',
              },
              {
                q: 'AI diagnosis says "no API key configured"',
                a: 'Set ANTHROPIC_API_KEY or OPENAI_API_KEY as an environment variable, or configure the provider in .drift.yaml under the ai section.',
              },
              {
                q: 'The health score seems too low',
                a: 'Scores are based on five weighted metrics. Run drift report to see which dimension is dragging your score down. You can adjust weights in .drift.yaml to match your team\'s priorities.',
              },
              {
                q: 'Can I use drift in a monorepo?',
                a: 'Yes — run drift from any subdirectory that has its own manifest file. Each sub-project is analyzed independently.',
              },
              {
                q: 'Does drift send any data externally?',
                a: 'Only if you enable AI diagnostics (which calls the LLM API you configure). Otherwise, drift is fully offline. No telemetry, no analytics, no phone-home.',
              },
              {
                q: 'How do I update drift?',
                a: 'Same way you installed it: brew upgrade drift, re-run the shell script, or go install ...@latest. Check the releases page for changelogs.',
              },
            ].map(item => (
              <details class="bg-surface border border-border rounded-xl group">
                <summary class="px-5 py-4 text-sm font-medium cursor-pointer text-text hover:text-green transition-colors flex items-center justify-between gap-4">
                  <span>{item.q}</span>
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="shrink-0 transition-transform group-open:rotate-180"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </summary>
                <div class="px-5 pb-4 text-sm text-text-muted leading-relaxed border-t border-border/30 pt-3">
                  {item.a}
                </div>
              </details>
            ))}
          </div>
        </section>

      </div>
      </div>
    </div>
  </main>

  <Footer />

  <!-- Copy-to-clipboard for all code blocks -->
  <CopyButton />

  <!-- Scroll spy for TOC active state -->
  <script>
    const tocLinks = document.querySelectorAll('.toc-link');
    const sections = Array.from(tocLinks).map(link => {
      const id = link.getAttribute('data-section');
      return id ? document.getElementById(id) : null;
    }).filter(Boolean);

    function updateActiveLink() {
      const scrollY = window.scrollY + 160;

      let activeId = '';
      for (const section of sections) {
        if (section.offsetTop <= scrollY) {
          activeId = section.id;
        }
      }

      tocLinks.forEach(link => {
        const isActive = link.getAttribute('data-section') === activeId;
        link.classList.toggle('active', isActive);
      });
    }

    window.addEventListener('scroll', updateActiveLink, { passive: true });
    updateActiveLink();
  </script>
</Layout>
